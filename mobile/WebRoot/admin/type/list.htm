##tlayout("admin/layout.htm"){

<div class="breadcrumbs">
	##if(type==1){
		<div class="col-xs-2 breadcrumbs_title">贴图分类</div>
	##}else if(type==2){
		<div class="col-xs-2 breadcrumbs_title">图库分类</div>
	##}else if(type==3){
		<div class="col-xs-2 breadcrumbs_title">商品分类</div>
	##}else if(type==4){
		<div class="col-xs-2 breadcrumbs_title">模板分类</div>
	##}else if(type==5){
		<div class="col-xs-2 breadcrumbs_title">蒙版分类</div>
	##}
	<div class="col-xs-10" style="text-align: right;">
		<a class="btn btn-info btn-sm" href="javascript:showAlert('/admin/type/add?type=${type!}')">+添加</a>
	</div>
</div>
<div class="page-content">
	##if(type==1){
		<div class="row">
			<div class="col-xs-12">
				<div class="tabbable tabs-left">
					<ul class="nav nav-tabs">
						<li>
							<a href="/admin/material" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">贴图管理</span>
							</a>
						</li>
						<li class="active">
							<a href="/admin/type?type=1" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">贴图分类</span>
							</a>
						</li>
						<li>
							<a href="/admin/material/store" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">贴图模板</span>
							</a>
						</li>
					</ul>
					<div class="tab-content" style="min-height: 500px;">
						<div class="tab-pane" style="display: block;">
							<div class="row">
								<div class="col-xs-12">
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover">
											<thead>
												<tr>
													<th>标题</th>
													<th>排序</th>
													##if(type==3){
														<th>图片</th>
														<th>置顶</th>
													##}
													<th>状态</th>
													<th>操作</th>
												</tr>
											</thead>
											<tbody>
												##for(_item in list!){
												<tr>
													<td>${_item.title!}</td>
													<td>${_item.idx!}</td>
													##if(type==3){
														<td><img src="${_item.img_url!}" style="max-height: 80px;max-width: 80px;" /></td>
														<td>
															##if(_item.top==1){
																置顶
															##}
														</td>
													##}
													<td>
														##if(_item.status==0){
															禁用
														##}else{
															启用
														##}
													</td>
													<td style="width:100px;">
														<div class="btn-group">
															<button class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">
																操作<span class="icon-caret-down icon-on-right"></span>
															</button>
															<ul class="dropdown-menu dropdown-info pull-right">
																<li><a href="javascript:showAlert('/admin/type/edit?id=${_item.id!}')">编辑</a></li>
																##if(type==3){
																	##if(_item.top==1){
																		<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
																		<li><a href="javascript:changeTop(${_item.id!}, 0, '取消置顶')">取消置顶</a></li>
																	##}else{
																		<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
																	##}
																##}
																##if(_item.status==1){
																	<li><a href="javascript:changeStatus(${_item.id!}, 0, '禁用')">禁用</a></li>
																##}else{
																	<li><a href="javascript:changeStatus(${_item.id!}, 1, '启用')">启用</a></li>
																##}
																<li><a href="javascript:changeStatus(${_item.id!}, 9, '删除')">删除</a></li>
															</ul>
														</div>
													</td>
												</tr>
												##}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	##}else if(type==2){
		<div class="row">
			<div class="col-xs-12">
				<div class="tabbable tabs-left">
					<ul class="nav nav-tabs">
						<li>
							<a href="/admin/background" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">图库管理</span>
							</a>
						</li>
						<li class="active">
							<a href="/admin/type?type=2" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">图库分类</span>
							</a>
						</li>
						<li>
							<a href="/admin/background/store" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">图库模板</span>
							</a>
						</li>
					</ul>
					<div class="tab-content" style="min-height: 500px;">
						<div class="tab-pane" style="display: block;">
							<div class="row">
								<div class="col-xs-12">
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover">
											<thead>
												<tr>
													<th>标题</th>
													<th>排序</th>
													##if(type==3){
														<th>图片</th>
														<th>置顶</th>
													##}
													<th>状态</th>
													<th>操作</th>
												</tr>
											</thead>
											<tbody>
												##for(_item in list!){
												<tr>
													<td>${_item.title!}</td>
													<td>${_item.idx!}</td>
													##if(type==3){
														<td><img src="${_item.img_url!}" style="max-height: 80px;max-width: 80px;" /></td>
														<td>
															##if(_item.top==1){
																置顶
															##}
														</td>
													##}
													<td>
														##if(_item.status==0){
															禁用
														##}else{
															启用
														##}
													</td>
													<td style="width:100px;">
														<div class="btn-group">
															<button class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">
																操作<span class="icon-caret-down icon-on-right"></span>
															</button>
															<ul class="dropdown-menu dropdown-info pull-right">
																<li><a href="javascript:showAlert('/admin/type/edit?id=${_item.id!}')">编辑</a></li>
																##if(type==3){
																	##if(_item.top==1){
																		<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
																		<li><a href="javascript:changeTop(${_item.id!}, 0, '取消置顶')">取消置顶</a></li>
																	##}else{
																		<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
																	##}
																##}
																##if(_item.status==1){
																	<li><a href="javascript:changeStatus(${_item.id!}, 0, '禁用')">禁用</a></li>
																##}else{
																	<li><a href="javascript:changeStatus(${_item.id!}, 1, '启用')">启用</a></li>
																##}
																<li><a href="javascript:changeStatus(${_item.id!}, 9, '删除')">删除</a></li>
															</ul>
														</div>
													</td>
												</tr>
												##}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	##}else if(type==5){
		<div class="row">
			<div class="col-xs-12">
				<div class="tabbable tabs-left">
					<ul class="nav nav-tabs">
						<li>
							<a href="/admin/mask" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">蒙版管理</span>
							</a>
						</li>
						<li class="active">
							<a href="/admin/type?type=5" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">蒙版分类</span>
							</a>
						</li>
						<li>
							<a href="/admin/mask/store" style="padding: 15px 20px;">
								<span style="margin-left: 5px;">蒙版模板</span>
							</a>
						</li>
					</ul>
					<div class="tab-content" style="min-height: 500px;">
						<div class="tab-pane" style="display: block;">
							<div class="row">
								<div class="col-xs-12">
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover">
											<thead>
												<tr>
													<th>标题</th>
													<th>排序</th>
													##if(type==3){
														<th>图片</th>
														<th>置顶</th>
													##}
													<th>状态</th>
													<th>操作</th>
												</tr>
											</thead>
											<tbody>
												##for(_item in list!){
												<tr>
													<td>${_item.title!}</td>
													<td>${_item.idx!}</td>
													##if(type==3){
														<td><img src="${_item.img_url!}" style="max-height: 80px;max-width: 80px;" /></td>
														<td>
															##if(_item.top==1){
																置顶
															##}
														</td>
													##}
													<td>
														##if(_item.status==0){
															禁用
														##}else{
															启用
														##}
													</td>
													<td style="width:100px;">
														<div class="btn-group">
															<button class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">
																操作<span class="icon-caret-down icon-on-right"></span>
															</button>
															<ul class="dropdown-menu dropdown-info pull-right">
																<li><a href="javascript:showAlert('/admin/type/edit?id=${_item.id!}')">编辑</a></li>
																##if(type==3){
																	##if(_item.top==1){
																		<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
																		<li><a href="javascript:changeTop(${_item.id!}, 0, '取消置顶')">取消置顶</a></li>
																	##}else{
																		<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
																	##}
																##}
																##if(_item.status==1){
																	<li><a href="javascript:changeStatus(${_item.id!}, 0, '禁用')">禁用</a></li>
																##}else{
																	<li><a href="javascript:changeStatus(${_item.id!}, 1, '启用')">启用</a></li>
																##}
																<li><a href="javascript:changeStatus(${_item.id!}, 9, '删除')">删除</a></li>
															</ul>
														</div>
													</td>
												</tr>
												##}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	##}else{
		<div class="row">
			<div class="col-xs-12">
				<div class="table-responsive">
					<table class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th>标题</th>
								<th>排序</th>
								##if(type==3){
									<th>图片</th>
									<th>置顶</th>
								##}
								<th>状态</th>
								<th>操作</th>
							</tr>
						</thead>
						<tbody>
							##for(_item in list!){
							<tr>
								<td>${_item.title!}</td>
								<td>${_item.idx!}</td>
								##if(type==3){
									<td><img src="${_item.img_url!}" style="max-height: 80px;max-width: 80px;" /></td>
									<td>
										##if(_item.top==1){
											置顶
										##}
									</td>
								##}
								<td>
									##if(_item.status==0){
										禁用
									##}else{
										启用
									##}
								</td>
								<td style="width:100px;">
									<div class="btn-group">
										<button class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">
											操作<span class="icon-caret-down icon-on-right"></span>
										</button>
										<ul class="dropdown-menu dropdown-info pull-right">
											<li><a href="javascript:showAlert('/admin/type/edit?id=${_item.id!}')">编辑</a></li>
											##if(type==3){
												##if(_item.top==1){
													<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
													<li><a href="javascript:changeTop(${_item.id!}, 0, '取消置顶')">取消置顶</a></li>
												##}else{
													<li><a href="javascript:showAlert('/admin/type/top?id=${_item.id!}')">置顶</a></li>
												##}
											##}
											##if(_item.status==1){
												<li><a href="javascript:changeStatus(${_item.id!}, 0, '禁用')">禁用</a></li>
											##}else{
												<li><a href="javascript:changeStatus(${_item.id!}, 1, '启用')">启用</a></li>
											##}
											<li><a href="javascript:changeStatus(${_item.id!}, 9, '删除')">删除</a></li>
										</ul>
									</div>
								</td>
							</tr>
							##}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	##}
</div>
<script>
function changeStatus(id, status, msg){
	
	if(confirm("确定要" + msg + "该条记录吗？")){
		$.post("/admin/type/changeStatus",{id:id,status:status},function(data){
			alert(data.msg);
			if(data.success){
				location.reload(true);
			}
		});
	}
}
function changeTop(id, top, msg){
	
	if(confirm("确定要" + msg + "该条记录吗？")){
		$.post("/admin/type/changeTop",{id:id,top:top},function(data){
			alert(data.msg);
			if(data.success){
				location.reload(true);
			}
		});
	}
}
</script>
##}